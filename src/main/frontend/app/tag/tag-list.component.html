<div class="container">
  <div class="row">
    <div class="col-md-12">
      <form>
        <div class="form-group">

          <input type="text"
                 ng-model="$ctrl.tag"
                 placeholder="Enter tag id or search by name"
                 uib-typeahead="tag as tag.name for tag in $ctrl.findTags($viewValue)"
                 typeahead-loading="loadingTags"
                 typeahead-select-on-exact="true"
                 typeahead-on-select="$ctrl.onTagSelected($item, $model, $label, $event)"
                 typeahead-no-results="noResults" class="form-control">
          <i ng-show="loadingTags" class="fa fa-cog fa-spin"></i>

          <div ng-show="noResults">
            <i class="fa fa-remove"></i> No tags found
          </div>

        </div>
      </form>

      <div ng-if="$ctrl.tag">

        <div class="header">
          <h3>
            {{$ctrl.tag.name}}

            <span class="pull-right text-success" style="font-size: 24px;">
              <code>{{$ctrl.tag.value}}</code>
            </span>
          </h3>

          <p>
            #{{$ctrl.tag.id}} <span ng-if="$ctrl.tag.description">: {{$ctrl.tag.description}}</span>

            <span class="pull-right">
              {{$ctrl.tag.dataTagQuality.description}}
              {{$ctrl.formatTimestamp($ctrl.tag.serverTimestamp)}}
            </span>
          </p>

        </div>


        <div class="chart-container">
          <div id="chart"></div>
        </div>


        <div class="history-table-container">
          <table class="table table-striped table-hover table-condensed">
            <thead>
            <tr>
              <th>Server Timestamp</th>
              <th>Value</th>
              <th>Quality</th>
              <th>Source Timestamp</th>
            </tr>
            </thead>

            <tbody>
            <tr ng-repeat="item in $ctrl.tagHistory">
              <td>{{$ctrl.formatTimestamp(item.c2mon.serverTimestamp)}}</td>
              <td>
                {{item.value}} {{item.valueNumeric}} {{item.valueBoolean}} {{item.valueString}}
              </td>
              <td>{{item.quality.statusInfo[0]}}</td>
              <td>{{$ctrl.formatTimestamp(item.c2mon.sourceTimestamp)}}</td>
            </tr>
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>
</div>
